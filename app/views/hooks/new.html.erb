<%
#--
#   Copyright (C) 2009 Nokia Corporation and/or its subsidiary(-ies)
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU Affero General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU Affero General Public License for more details.
#
#   You should have received a copy of the GNU Affero General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#++
%>

<% help_box do -%>
<p>
  A <em>hook</em> is a callback URL Gitorious will post the contents of a push
  to. The contents and format is described 
  <a href="http://gitorious.org/gitorious/pages/WebHooks">here</a>
</p>
<p>
  In a nutshell, a JSON hash i POSTed to the url you give here whenever a set 
  of commits is pushed to this repository
</p>
<% end -%>

<%= error_messages_for :hook -%>
<% form_for :hook, 
  :url => repo_owner_path(@repository, [@repository.project, @repository, @hook]) do |f| -%>
  <p>
    <%= f.label :url %>: <br /> 
    <%= f.text_field :url %>
  </p>
  <p><%= f.submit "Add commit callback URL" -%></p>
<% end -%>

<% content_for(:sidebar) do -%>
  <% content_for :sidebar do -%>
    <ul class="links">
      <li class="repository">
        <%= link_to "Back to repository", repo_owner_path(@repository, 
          :project_repository_path, @repository.project, @repository) -%></li>
    </ul>
  <% end -%>
<% end -%>