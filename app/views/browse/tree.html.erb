<% @page_title = "Tree for #{@repository.name} in #{@project.title}" -%>
<h1>
  Tree of <%= h(@repository.name) -%> repository in <%= h(@project.title) -%>
</h1>

<%= breadcrumb_path(@repository.name, @commit.id) -%>

<table class="listing tree">
  <% @tree.contents.sort_by{|c| c.name.downcase}.each do |node| -%>
  <tr class="<%= cycle("odd", "even") -%>">
    <!-- <td><%#= h(node.mode) -%></td> -->
    <% if node.is_a? Grit::Tree -%>
      <td class="node tree"><%= link_to h(node.basename) + "/", tree_path(@commit.id, node.name) -%></td>
    <% else -%>
      <td class="node file"><%= link_to h(node.basename), blob_path(@commit.id, node.name) -%></td>
    <% end -%>
    <td></td>
  </tr>
  <% end -%>
</table>

<% content_for :sidebar do -%>  
  <%= render :partial => "tags_and_branches" -%>
<% end -%>